<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Panel - View User Balances</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eef2f7;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 400px;
      margin: auto;
      background: white;
      padding: 24px;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.08);
      text-align: center;
    }
    h2 {
      color: #1877f2;
      margin-bottom: 20px;
    }
    select {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 20px;
      box-sizing: border-box;
    }
    .info {
      font-size: 18px;
      color: #333;
      margin-bottom: 8px;
    }
    .label {
      font-weight: bold;
      color: #666;
      margin-top: 12px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>üîç Admin View Balance</h2>

  <select id="userSelect" onchange="showUserDetails()">
    <option value="">-- Select User by Email --</option>
  </select>

  <div class="label">Username</div>
  <div id="userName" class="info">-</div>

  <div class="label">Email</div>
  <div id="userEmail" class="info">-</div>

  <div class="label">Current Balance (Rs)</div>
  <div id="userBalance" class="info">0.00</div>
</div>

<script>
  const usersKey = "usersList";
  const userSelect = document.getElementById("userSelect");
  const userNameDisplay = document.getElementById("userName");
  const userEmailDisplay = document.getElementById("userEmail");
  const userBalanceDisplay = document.getElementById("userBalance");

  // Sample users added only once
  if (!localStorage.getItem(usersKey)) {
    const sampleUsers = [
      { name: "Milan Kandel", email: "milankandel584@gmail.com", balance: 850.75 },
      { name: "Sita Sharma", email: "sita@genx.com", balance: 1320.00 },
      { name: "Ram Bahadur", email: "ram@genx.com", balance: 0.00 },
      { name: "Anjali Rai", email: "anjali@genx.com", balance: 550.50 }
    ];
    localStorage.setItem(usersKey, JSON.stringify(sampleUsers));
  }

  function getUsers() {
    return JSON.parse(localStorage.getItem(usersKey)) || [];
  }

  function populateUserDropdown() {
    const users = getUsers();
    userSelect.innerHTML = `<option value="">-- Select User by Email --</option>`;
    users.forEach(user => {
      const option = document.createElement("option");
      option.value = user.email;
      option.textContent = `${user.name} (${user.email})`;
      userSelect.appendChild(option);
    });
  }

  function showUserDetails() {
    const email = userSelect.value;
    if (!email) {
      userNameDisplay.textContent = "-";
      userEmailDisplay.textContent = "-";
      userBalanceDisplay.textContent = "0.00";
      return;
    }
    const users = getUsers();
    const user = users.find(u => u.email === email);
    if (!user) {
      userNameDisplay.textContent = "User not found";
      userEmailDisplay.textContent = "-";
      userBalanceDisplay.textContent = "0.00";
      return;
    }
    userNameDisplay.textContent = user.name;
    userEmailDisplay.textContent = user.email;
    userBalanceDisplay.textContent = user.balance.toFixed(2);
  }

  // Populate dropdown on page load
  populateUserDropdown();
</script>

</body>
</html>
